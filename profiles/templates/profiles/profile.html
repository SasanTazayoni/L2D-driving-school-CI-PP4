{% extends 'base.html' %}
{% load i18n %}
{% load static %}

{% block head_title %}{% trans "L2D - Your profile" %}{% endblock head_title %}

{% block content %}
<div class="container mt-5">
  <div class="row">
    <div class="col-12 text-center">
      <!-- Display username above the image -->
      <h2>{{ profile.user.username }}</h2>

      <!-- Display user-uploaded image or default image -->
      {% if profile.profile_picture.url %}
        <img src="{{ profile.profile_picture.url }}" width="25%" />
      {% else %}
        <img src="{% static 'images/defaultpicture.png' %}" width="25%" />
      {% endif %}

      <!-- Display "About Me" with the about_me content -->
      {% if profile.about_me %}
        <div class="mt-3">
          <h3>About Me</h3>
          {{ profile.about_me | safe }}
        </div>
      {% endif %}
      <button type="button" id="deleteButton" class="red-button">Delete Account</button>
    </div>

    <div class="row mt-3">
      <div class="col-12 text-center">
        <a href="{% url 'edit_profile' %}" class="btn btn-primary mt-3 mx-1">Edit Profile</a>
        <a href="{% url 'create-review' %}" class="btn btn-secondary mt-3 mx-1">Add review</a>
      </div>
    </div>
  </div>
</div>

<!-- Delete Profile Modal -->
<div class="modal fade" id="deleteProfileModal" tabindex="-1" role="dialog" aria-labelledby="deleteProfileModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
      <div class="modal-content">
          <div class="modal-header">
              <h5 class="modal-title" id="deleteProfileModalLabel">Confirm Logout</h5>
          </div>
          <div class="modal-body">
              Are you sure you want to delete your account? All your information including posts will be permanently removed!
          </div>
          <div class="modal-footer d-flex justify-content-center">
            <form method="POST" action="{% url 'delete_profile' %}">
              {% csrf_token %}
              <button type="submit" class="red-button">Yes</button>
            </form>
            <button type="button" id="closeDeleteProfileModal" class="btn btn-secondary" data-dismiss="modal" aria-label="Close">
                No
            </button>
          </div>
      </div>
  </div>
</div>
{% endblock content %}